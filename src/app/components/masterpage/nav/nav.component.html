<div class="nav-component">
  <button
    class="navbar-toggler navbar-toggler-right"
    type="button"
    aria-controls="navbar-main"
    aria-expanded="false"
    aria-label="Toggle navigation"
    (click)="isOpen = !isOpen"
  >
    <i class="fa fa-bars" aria-hidden="true"></i>
  </button>

  <div class="navbar-collapse" id="navbar-main" [ngClass]="{ 'collapse open': isOpen }">
    <div class="navbar-mobile">
      <ul class="navbar-nav mr-auto justify-content-center w-100">
        <li class="nav-item">
          <a class="nav-link" routerLink="https://www.origin8now.com/app/quick-quote" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
            Quick Quote
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="https://www.origin8now.com/app/submitloan" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
            Apply Now
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="https://www.origin8now.com/app/pipeline" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
            Pipeline View
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="https://www.origin8now.com/app/condition" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
            Conditions Needed
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="https://www.origin8now.com/app/documents" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
            My Documents
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
            CRM
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" routerLink="/alerts-tasks"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Alerts &amp; Tasks</a>
            <a class="dropdown-item" routerLink="/contacts"><i class="fa fa-user"></i> Contact</a>
            <a class="dropdown-item" routerLink="/contacts/company"><i class="fa fa-id-card-o" aria-hidden="true"></i> Company Dashboard</a>
            <a class="dropdown-item" routerLink="/contacts/company/123"><i class="fa fa-id-card-o" aria-hidden="true"></i> Company Profile</a>
            <!--
            <div class="dropdown-divider"></div>
            -->
          </div>
        </li>
      </ul>

      <!-- Mobile only utility nav from dropdown in appMenu -->
      <ul class="navbar-nav mr-auto d-block d-lg-none nav-mobile-only">
        <li class="nav-item"><ng-container *ngTemplateOutlet="utilityNav"></ng-container></li>
      </ul>

      <div class="form-inline my-2 my-lg-0 d-none d-lg-flex">
        <!-- App update notification -->
        <ng-container *ngIf="(hasUpdate$ | async) as hasUpdate">
          <a class="badge badge-warning mr-3 py-2" (click)="updateApp()" style="color:#fff;">
            <i class="fa fa-warning"></i> Update Available
          </a>
        </ng-container>

        <a [matMenuTriggerFor]="appMenu" class="dropnav">
          Hi <span class="mr-5 active">Joe User </span> <span> <i class="fa fa-caret-down mr-1"></i></span>
        </a>
        <mat-menu #appMenu="matMenu" xPosition="after"> <ng-container *ngTemplateOutlet="utilityNav"></ng-container> </mat-menu>
      </div>
    </div>
    <div class="nav-mobile-bg" (click)="isOpen = !isOpen"></div>
  </div>
</div>

<!-- Utility nav. Used in user dropdown and below main nav in mobile-->
<ng-template #utilityNav>
  <button mat-menu-item disabled *ngIf="(version$ | async) as version">Version: {{ version }}</button>
  <!--
  <button mat-menu-item class="nav-link" (click)="modals.open('FeedbackComponent')">
    <i class="fa fa-comments-o" aria-hidden="true"></i> Send Feedback
  </button>
  -->
  <a mat-menu-item class="nav-link" (click)="logOut()"> <i class="fa fa-power-off mr-1" aria-hidden="true"></i> Sign Out </a>
</ng-template>
